@page "/settings"
@layout LayoutMain

<PageTitle>Thiết lập</PageTitle>
<div class="mail-wrapper">
    <MailSideBar/>
    <div  class="mail__main">
        <HeaderMain />
        <section class="is-padding-20 is-flex is-flex-direction-column" style="gap: 20px 0">
            <_ManagerGroup groups="groups" members="members" getAllGroups="getAllGroups"/>
            <_ManagerCategory categories="categories"/>
            <_ManagerLabel labels="labels"/>
            <_ManagerSignature signatures="signatures" getAllSignatures="getAllSignatures"/>
        </section> 
    </div>
</div>
@code {
    [CascadingParameter]
    public LayoutMain Layout { get; set; }
    private List<LabelModel> labels = new();
    private List<CategoryModel> categories = new();
    private List<GroupModel> groups = new List<GroupModel>();
    private List<MemberModel> members = new List<MemberModel>();
    private List<SignatureModel> signatures = new List<SignatureModel>();


    protected override async Task OnInitializedAsync ()
    {
        signatures = await SignatureData.GetAllSignatures(Layout.User.id);
        categories = await CategoryData.GetAllCategory();
        labels = await LabelData.GetAllLabels(Layout.User.id);

        groups = await GroupData.GetAllGroups();
        members = InitDataFakeHelper.InitMembers();
    }


    private async Task<List<SignatureModel>> getAllSignatures()
    {
        signatures = await SignatureData.GetAllSignatures(Layout.User.id);
        return signatures;
    }


    private async Task<List<GroupModel>> getAllGroups() 
    {
        groups = await GroupData.GetAllGroups();
        return groups;
    }
}